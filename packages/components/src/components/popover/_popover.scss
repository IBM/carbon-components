//
// Copyright IBM Corp. 2016, 2018
//
// This source code is licensed under the Apache-2.0 license found in the
// LICENSE file in the root directory of this source tree.
//

@import '../../globals/scss/vars';
@import '../../globals/scss/vendor/@carbon/elements/scss/import-once/import-once';

/// Popover component
/// @access private
/// @group popover
@mixin popover {
  .#{$prefix}--popover {
    --cds-popover-background-color: #{$ui-01};
    --cds-popover-color: #{$text-01};
    --cds-popover-caret-offset: 1rem;

    display: none;
    position: absolute;
    z-index: z('floating');
  }

  .#{$prefix}--popover--light {
    --cds-popover-background-color: #{$ui-background};
  }

  .#{$prefix}--popover--relative {
    position: relative;
  }

  .#{$prefix}--popover--open {
    display: block;
  }

  .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover-contents::after {
    content: '';
    display: inline-block;
    position: absolute;
    width: rem(8px);
    height: rem(8px);
    background-color: inherit;
  }

  .#{$prefix}--popover-contents::before {
    box-shadow: 2px 2px 6px 0 rgba(0, 0, 0, 0.2);
    z-index: -1;
  }

  .#{$prefix}--popover-contents {
    @include box-shadow;

    background-color: var(--cds-popover-background-color);
    color: var(--cds-popover-color);
    width: max-content;
    max-width: rem(368px);
    border-radius: 2px;
    padding: rem(16px);
    z-index: 1000;
  }

  //-----------------------------------------------------------------------------
  // Top
  //-----------------------------------------------------------------------------
  .#{$prefix}--popover--top .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover--top .#{$prefix}--popover-contents::after {
    left: 50%;
    top: 0;
    transform: translate(-50%, -50%) rotate(45deg);
  }

  .#{$prefix}--popover--top-left .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover--top-left .#{$prefix}--popover-contents::after {
    left: var(--cds-popover-caret-offset);
    top: 0;
    transform: translate(-50%, -50%) rotate(45deg);
  }

  .#{$prefix}--popover--top-right .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover--top-right .#{$prefix}--popover-contents::after {
    right: var(--cds-popover-caret-offset);
    top: 0;
    transform: translate(50%, -50%) rotate(45deg);
  }

  //-----------------------------------------------------------------------------
  // Bottom
  //-----------------------------------------------------------------------------
  .#{$prefix}--popover--bottom .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover--bottom .#{$prefix}--popover-contents::after {
    left: 50%;
    bottom: 0;
    transform: translate(-50%, 50%) rotate(45deg);
  }

  .#{$prefix}--popover--bottom-left .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover--bottom-left .#{$prefix}--popover-contents::after {
    left: var(--cds-popover-caret-offset);
    bottom: 0;
    transform: translate(-50%, 50%) rotate(45deg);
  }

  .#{$prefix}--popover--bottom-right .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover--bottom-right .#{$prefix}--popover-contents::after {
    right: var(--cds-popover-caret-offset);
    bottom: 0;
    transform: translate(50%, 50%) rotate(45deg);
  }

  //-----------------------------------------------------------------------------
  // Left
  //-----------------------------------------------------------------------------
  .#{$prefix}--popover--left .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover--left .#{$prefix}--popover-contents::after {
    top: 50%;
    left: 0;
    transform: translate(-50%, -50%) rotate(45deg);
  }

  .#{$prefix}--popover--left-bottom .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover--left-bottom .#{$prefix}--popover-contents::after {
    bottom: var(--cds-popover-caret-offset);
    left: 0;
    transform: translate(-50%, 50%) rotate(45deg);
  }

  .#{$prefix}--popover--left-top .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover--left-top .#{$prefix}--popover-contents::after {
    top: var(--cds-popover-caret-offset);
    left: 0;
    transform: translate(-50%, -50%) rotate(45deg);
  }

  //-----------------------------------------------------------------------------
  // Right
  //-----------------------------------------------------------------------------
  .#{$prefix}--popover--right .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover--right .#{$prefix}--popover-contents::after {
    top: 50%;
    right: 0;
    transform: translate(50%, -50%) rotate(45deg);
  }

  .#{$prefix}--popover--right-bottom .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover--right-bottom .#{$prefix}--popover-contents::after {
    bottom: var(--cds-popover-caret-offset);
    right: 0;
    transform: translate(50%, 50%) rotate(45deg);
  }

  .#{$prefix}--popover--right-top .#{$prefix}--popover-contents::before,
  .#{$prefix}--popover--right-top .#{$prefix}--popover-contents::after {
    top: var(--cds-popover-caret-offset);
    right: 0;
    transform: translate(50%, -50%) rotate(45deg);
  }
}

@include exports('popover') {
  @include popover;
}
