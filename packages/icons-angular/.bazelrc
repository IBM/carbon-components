# Performance: avoid stat'ing input files
build --watchfs

# Do not generate the symbolic links bazel-*.
build --symlink_prefix=dist/

build --experimental_allow_incremental_repository_updates

build --local_cpu_resources=2

build --local_ram_resources=3072

startup --host_jvm_args=-Xmx2G

# Print all the options that apply to the build.
# This helps us diagnose which options override others
build --announce_rc

# More details on failures
build --verbose_failures=true

# so we should saturate remote workers with TS compilations
build --strategy=AngularTemplateCompile=worker
build --strategy=TypeScriptCompile=worker

# Save downloaded repositories in a location that can be cached by CircleCI
build --experimental_repository_cache=/home/circleci/bazel_repository_cache