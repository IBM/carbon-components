//
// Copyright IBM Corp. 2015, 2020
//
// This source code is licensed under the Apache-2.0 license found in the
// LICENSE file in the root directory of this source tree.
//

@import 'generated/feature-flags';

// $feature-flags: map-keys($generated-feature-flags);
// $feature-flag-state: map-merge((), $generated-feature-flags);

@function add-feature-flag($name, $enabled: false) {
  $feature-flag-state: map-merge(
    $feature-flag-state,
    (
      $name: $enabled,
    )
  );
}

@function enable-feature-flag($name) {
  $feature-flag-state: map-merge(
    $feature-flag-state,
    (
      $name: true,
    )
  );
}

@function disable-feature-flag($name) {
  $feature-flag-state: map-merge(
    $feature-flag-state,
    (
      $name: false,
    )
  );
}

@function feature-flag-enabled($name) {
  @if (map-has-key($feature-flag-state, $name)) {
    @return map-get($feature-flag-state, $name);
  }
  @error 'Unable to find feature flag named #{$name}';
}

@mixin feature-flag-enabled($name) {
  @if feature-flag-enabled($name) {
    @content;
  }
}
