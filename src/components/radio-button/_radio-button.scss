//
// Copyright IBM Corp. 2016, 2018
//
// This source code is licensed under the Apache-2.0 license found in the
// LICENSE file in the root directory of this source tree.
//

//-----------------------------
// Radio
//-----------------------------

@import '../../globals/scss/vars';
@import '../../globals/scss/typography';
@import '../../globals/scss/helper-mixins';
@import '../../globals/scss/import-once';
@import '../form/form';
@import '../../globals/scss/css--reset';

@mixin radio-button {
  .#{$prefix}--radio-button-group {
    display: flex;
    align-items: center;
    margin-top: $spacing-xs;
  }

  .#{$prefix}--radio-button {
    @include hidden;
    visibility: unset;
  }

  .#{$prefix}--radio-button__label {
    @include typescale('zeta');
    @include font-family;
    display: flex;
    align-items: center;
    cursor: pointer;
    margin-right: $spacing-md;
  }

  .#{$prefix}--radio-button__appearance {
    @include reset;
    background-color: $inverse-01;
    border-radius: 50%;
    border: $radio-border-width solid $ui-05;
    flex-shrink: 0;
    height: rem(18px);
    width: rem(18px);
    margin-right: $spacing-xs;
  }

  .#{$prefix}--radio-button:checked + .#{$prefix}--radio-button__label .#{$prefix}--radio-button__appearance {
    display: flex;
    align-items: center;
    justify-content: center;
    border-color: $brand-01;

    &:before {
      content: '';
      display: inline-block;
      position: relative;
      width: 0.5rem;
      height: 0.5rem;
      border-radius: 50%;
      background-color: $brand-01;
    }
  }

  .#{$prefix}--radio-button:disabled + .#{$prefix}--radio-button__label {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .#{$prefix}--radio-button:focus + .#{$prefix}--radio-button__label .#{$prefix}--radio-button__appearance {
    @include focus-outline('blurred');
  }

  // Skeleton State
  .#{$prefix}--radio-button__label.#{$prefix}--skeleton {
    @include skeleton;
    width: rem(100px);
    height: rem(18px);
  }

  .#{$prefix}--radio-button__label.#{$prefix}--skeleton .#{$prefix}--radio-button__appearance {
    display: none;
  }
}

@mixin radio-button--experimental {
  .#{$prefix}--radio-button-group {
    display: flex;
    align-items: center;
    margin-top: $spacing-xs;
  }

  // vertical radio button
  .#{$prefix}--radio-button-group--vertical {
    flex-direction: column;

    .#{$prefix}--radio-button__label {
      margin-right: 0;
    }

    .#{$prefix}--radio-button__label:not(:last-of-type) {
      margin-bottom: $spacing-xs;
    }
  }

  .#{$prefix}--radio-button {
    @include hidden;
    visibility: unset;
  }

  .#{$prefix}--radio-button__label {
    @include typescale('zeta');
    @include font-family;
    display: flex;
    align-items: center;
    cursor: pointer;
    margin-right: $spacing-md;
  }

  .#{$prefix}--radio-button__appearance {
    @include reset;
    background-color: $inverse-01;
    border-radius: 50%;
    border: $radio-border-width solid $ui-05;
    flex-shrink: 0;
    height: rem(18px);
    width: rem(18px);
    margin-right: $spacing-xs;
  }

  .#{$prefix}--radio-button:checked + .#{$prefix}--radio-button__label .#{$prefix}--radio-button__appearance {
    display: flex;
    align-items: center;
    justify-content: center;
    border-color: $ui-05;

    &:before {
      content: '';
      display: inline-block;
      position: relative;
      width: 0.5rem;
      height: 0.5rem;
      border-radius: 50%;
      background-color: $ui-05;
    }
  }

  .#{$prefix}--radio-button:focus + .#{$prefix}--radio-button__label .#{$prefix}--radio-button__appearance {
    border-color: transparent;
  }

  // Disabled

  // Workaround for: https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/11295231
  [disabled] ~ _ {
    font-size: inherit;
  }

  .#{$prefix}--radio-button:disabled + .#{$prefix}--radio-button__label {
    color: $disabled;
    cursor: not-allowed;
  }

  .#{$prefix}--radio-button:disabled + .#{$prefix}--radio-button__label .#{$prefix}--radio-button__appearance,
  .#{$prefix}--radio-button:disabled:checked + .#{$prefix}--radio-button__label .#{$prefix}--radio-button__appearance {
    border-color: $disabled;
  }

  // Focus

  .#{$prefix}--radio-button:focus + .#{$prefix}--radio-button__label .#{$prefix}--radio-button__appearance {
    @include focus-outline('blurred');
  }

  // Skeleton State
  .#{$prefix}--radio-button__label.#{$prefix}--skeleton {
    @include skeleton;
    width: rem(100px);
    height: rem(18px);
  }

  .#{$prefix}--radio-button__label.#{$prefix}--skeleton .#{$prefix}--radio-button__appearance {
    display: none;
  }
}

@mixin radio-button--colors {
  @if feature-flag-enabled('components-x') {
    .#{$prefix}--radio-button__appearance {
      background-color: $inverse-01;
      border-color: $ui-05;
    }

    .#{$prefix}--radio-button:checked + .#{$prefix}--radio-button__label .#{$prefix}--radio-button__appearance {
      border-color: $ui-05;

      &:before {
        background-color: $ui-05;
      }
    }

    .#{$prefix}--radio-button:focus + .#{$prefix}--radio-button__label .#{$prefix}--radio-button__appearance {
      border-color: transparent;
    }

    .#{$prefix}--radio-button:disabled + .#{$prefix}--radio-button__label {
      color: $disabled;
    }

    .#{$prefix}--radio-button:disabled + .#{$prefix}--radio-button__label .#{$prefix}--radio-button__appearance,
    .#{$prefix}--radio-button:disabled:checked + .#{$prefix}--radio-button__label .#{$prefix}--radio-button__appearance {
      border-color: $disabled;
    }

    .#{$prefix}--radio-button:focus + .#{$prefix}--radio-button__label .#{$prefix}--radio-button__appearance {
      @include focus-outline--colors('blurred');
    }

    .#{$prefix}--radio-button__label.#{$prefix}--skeleton {
      @include skeleton--colors;
    }
  } @else {
    // TODO non-experiment color overrides
  }
}

@include exports('radio-button') {
  @if feature-flag-enabled('components-x') {
    @include radio-button--experimental;
  } @else {
    @include radio-button;
  }
}
