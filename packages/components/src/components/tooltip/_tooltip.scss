//
// Copyright IBM Corp. 2016, 2018
//
// This source code is licensed under the Apache-2.0 license found in the
// LICENSE file in the root directory of this source tree.
//

@import '../../globals/scss/vars';
@import '../../globals/scss/layer';
@import '../../globals/scss/helper-mixins';
@import '../../globals/scss/tooltip';
@import '../../globals/scss/vendor/@carbon/elements/scss/import-once/import-once';
@import '../../globals/scss/css--reset';

/// Tooltip styles
/// @access private
/// @group tooltip
@mixin tooltip {
  .#{$prefix}--tooltip--icon {
    display: inline-flex;
    align-items: center;
  }

  .#{$prefix}--tooltip__label {
    @include type-style('label-01');
    display: inline-flex;
    align-items: center;
    color: $text-02;

    .#{$prefix}--tooltip__trigger {
      margin-left: $carbon--spacing-03;
    }
  }

  .#{$prefix}--tooltip__label:focus {
    @include focus-outline('border');
  }

  .#{$prefix}--tooltip__trigger:not(.#{$prefix}--btn--icon-only) {
    @include button-reset($width: false);
    display: inline-flex;
    align-items: center;
    cursor: pointer;
    font-size: 1rem;

    &:focus {
      @include focus-outline('border');
      fill: $hover-primary;
    }

    path,
    polygon,
    circle {
      fill: $icon-02;
    }
  }

  .#{$prefix}--tooltip__label--bold {
    font-weight: 600;
  }

  .#{$prefix}--tooltip {
    @include layer('overlay');
    @include reset;
    position: absolute;
    display: none;
    min-width: rem(208px);
    max-width: rem(288px);
    background: $inverse-02;
    margin-top: $carbon--spacing-02;
    padding: 1rem;
    border-radius: rem(2px);
    z-index: z('floating');
    word-wrap: break-word;
    color: $inverse-01;

    p {
      @include type-style('body-short-01');
    }

    button {
      padding-right: $carbon--spacing-07;
    }

    .#{$prefix}--link {
      // Need to add new link / UI color -- IBM Color Blue 40
      color: $link-inverse-color;
      font-size: rem(14px);

      &:active {
        color: $inverse-01;
      }

      &:visited {
        color: $link-inverse-color;
      }
    }

    .#{$prefix}--tooltip__caret {
      position: absolute;
      background: $inverse-02;
      left: 0;
      top: rem(-4px);
      right: 0;
      transform: rotate(-135deg);
      width: 0.6rem;
      height: 0.6rem;
      margin: 0 auto;
      content: '';
    }

    .#{$prefix}--tooltip__footer {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-top: 1rem;
    }

    &[data-floating-menu-direction='left'] {
      .#{$prefix}--tooltip__caret {
        left: auto;
        top: 50%;
        right: rem(-4px);
        transform: rotate(-45deg) translate(50%, -50%);
      }
    }

    &[data-floating-menu-direction='top'] {
      .#{$prefix}--tooltip__caret {
        top: auto;
        bottom: rem(-4px);
        transform: rotate(45deg);
      }
    }

    &[data-floating-menu-direction='right'] {
      .#{$prefix}--tooltip__caret {
        left: rem(-4px);
        top: 50%;
        right: auto;
        transform: rotate(135deg) translate(-50%, 50%);
      }
    }
  }

  .#{$prefix}--tooltip--shown {
    display: block;
  }

  // Tooltip Definition
  // Definition CSS only tooltip
  .#{$prefix}--tooltip--definition .#{$prefix}--tooltip__trigger {
    @include type-style('label-01');
    border-bottom: rem(1px) dotted $interactive-01;
  }

  .#{$prefix}--tooltip--definition {
    @include tooltip--placement('definition', 'bottom', 'start');

    .#{$prefix}--tooltip--top {
      @include tooltip--trigger('definition', 'top');
      @include tooltip--placement('definition', 'top', 'start');

      &.#{$prefix}--tooltip--align-start {
        @include tooltip--placement('definition', 'top', 'start');
      }

      &.#{$prefix}--tooltip--align-center {
        @include tooltip--placement('definition', 'top', 'center');
      }

      &.#{$prefix}--tooltip--align-end {
        @include tooltip--placement('definition', 'top', 'end');
      }
    }

    .#{$prefix}--tooltip--right {
      @include tooltip--trigger('definition', 'right');
      @include tooltip--placement('definition', 'right', 'start');

      &.#{$prefix}--tooltip--align-start {
        @include tooltip--placement('definition', 'right', 'start');
      }

      &.#{$prefix}--tooltip--align-center {
        @include tooltip--placement('definition', 'right', 'center');
      }

      &.#{$prefix}--tooltip--align-end {
        @include tooltip--placement('definition', 'right', 'end');
      }
    }

    .#{$prefix}--tooltip--bottom {
      @include tooltip--trigger('definition', 'bottom');
      @include tooltip--placement('definition', 'bottom', 'start');

      &.#{$prefix}--tooltip--align-start {
        @include tooltip--placement('definition', 'bottom', 'start');
      }

      &.#{$prefix}--tooltip--align-center {
        @include tooltip--placement('definition', 'bottom', 'center');
      }

      &.#{$prefix}--tooltip--align-end {
        @include tooltip--placement('definition', 'bottom', 'end');
      }
    }

    .#{$prefix}--tooltip--left {
      @include tooltip--trigger('definition', 'left');
      @include tooltip--placement('definition', 'left', 'start');

      &.#{$prefix}--tooltip--align-start {
        @include tooltip--placement('definition', 'left', 'start');
      }

      &.#{$prefix}--tooltip--align-center {
        @include tooltip--placement('definition', 'left', 'center');
      }

      &.#{$prefix}--tooltip--align-end {
        @include tooltip--placement('definition', 'left', 'end');
      }
    }
  }

  // Tooltip Icon
  // Icon CSS only tooltip
  .#{$prefix}--tooltip--icon .#{$prefix}--tooltip__trigger {
    &:hover,
    &:focus {
      svg {
        fill: $icon-02;
      }
    }

    &:focus {
      outline: 1px solid transparent;

      svg {
        @include focus-outline('border');
      }
    }
  }

  .#{$prefix}--tooltip--icon {
    @include tooltip--placement('icon', 'bottom', 'center');

    .#{$prefix}--tooltip--top {
      @include tooltip--trigger('icon', 'top');
      @include tooltip--placement('icon', 'top', 'center');

      &.#{$prefix}--tooltip--align-start {
        @include tooltip--placement('icon', 'top', 'start');
      }

      &.#{$prefix}--tooltip--align-center {
        @include tooltip--placement('icon', 'top', 'center');
      }

      &.#{$prefix}--tooltip--align-end {
        @include tooltip--placement('icon', 'top', 'end');
      }
    }

    .#{$prefix}--tooltip--right {
      @include tooltip--trigger('icon', 'right');
      @include tooltip--placement('icon', 'right', 'center');

      &.#{$prefix}--tooltip--align-start {
        @include tooltip--placement('icon', 'right', 'start');
      }

      &.#{$prefix}--tooltip--align-center {
        @include tooltip--placement('icon', 'right', 'center');
      }

      &.#{$prefix}--tooltip--align-end {
        @include tooltip--placement('icon', 'right', 'end');
      }
    }

    .#{$prefix}--tooltip--bottom {
      @include tooltip--trigger('icon', 'bottom');
      @include tooltip--placement('icon', 'bottom', 'center');

      &.#{$prefix}--tooltip--align-start {
        @include tooltip--placement('icon', 'bottom', 'start');
      }

      &.#{$prefix}--tooltip--align-center {
        @include tooltip--placement('icon', 'bottom', 'center');
      }

      &.#{$prefix}--tooltip--align-end {
        @include tooltip--placement('icon', 'bottom', 'end');
      }
    }

    .#{$prefix}--tooltip--left {
      @include tooltip--trigger('icon', 'left');
      @include tooltip--placement('icon', 'left', 'center');

      &.#{$prefix}--tooltip--align-start {
        @include tooltip--placement('icon', 'left', 'start');
      }

      &.#{$prefix}--tooltip--align-center {
        @include tooltip--placement('icon', 'left', 'center');
      }

      &.#{$prefix}--tooltip--align-end {
        @include tooltip--placement('icon', 'left', 'end');
      }
    }
  }

  // Tooltip position - icon only
  .#{$prefix}--tooltip--icon .#{$prefix}--tooltip__trigger svg {
    margin-left: 0;
  }
}

@include exports('tooltip') {
  @include tooltip;
}
